$(document).ready(function(){gebo_mailbox.msg_rowLink();gebo_mailbox.new_message();gebo_mailbox.inbox();gebo_mailbox.outbox();gebo_mailbox.trash();gebo_mailbox.actions()});gebo_mailbox={inbox:function(){$("#dt_inbox").dataTable({oLanguage:{sLengthMenu:"_MENU_ messages",sZeroRecords:"No messages to display"},sDom:"<'row'<'span6'<'dt_actions'>l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",iDisplayLength:25,aaSorting:[[5,"desc"]],aoColumns:[{bSortable:false,sWidth:"13px"},{bSortable:false,sWidth:"16px"},{bSortable:false,sWidth:"16px"},{sType:"string"},{sType:"string"},{sType:"eu_date"},{sType:"formatted-num"},{bSortable:false,sWidth:"16px"}]});$("#dt_inbox_wrapper .dt_actions").html($(".dt_inbox_actions").html());$("#dt_inbox_wrapper .dt_actions a").addClass("ttip_t");gebo_tips.init()},outbox:function(){$("#dt_outbox").dataTable({oLanguage:{sLengthMenu:"_MENU_ messages",sZeroRecords:"No messages to display"},sDom:"<'row'<'span6'<'dt_actions'>l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",iDisplayLength:25,aaSorting:[[5,"desc"]],aoColumns:[{bSortable:false,sWidth:"13px"},{bSortable:false,sWidth:"16px"},{bSortable:false,sWidth:"16px"},{sType:"string"},{sType:"string"},{sType:"eu_date"},{sType:"formatted-num"},{bSortable:false,sWidth:"16px"}]});$("#dt_outbox_wrapper .dt_actions").html($(".dt_outbox_actions").html());$("#dt_outbox_wrapper .dt_actions a").addClass("ttip_t");gebo_tips.init()},trash:function(){$("#dt_trash").dataTable({oLanguage:{sLengthMenu:"_MENU_ messages",sZeroRecords:"No messages to display"},sDom:"<'row'<'span6'<'dt_actions'>l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",iDisplayLength:25,aaSorting:[[5,"desc"]],aoColumns:[{bSortable:false,sWidth:"13px"},{bSortable:false,sWidth:"16px"},{bSortable:false,sWidth:"16px"},{sType:"string"},{sType:"string"},{sType:"eu_date"},{sType:"formatted-num"},{bSortable:false,sWidth:"16px"}]});$("#dt_trash_wrapper .dt_actions").html($(".dt_trash_actions").html());$("#dt_trash_wrapper .dt_actions a").addClass("ttip_t");gebo_tips.init()},actions:function(){$(".table").on("click",".mbox_star",function(){$(this).toggleClass("splashy-star_empty splashy-star_full")});$(".table").on("mouseenter",".starSelect",function(){$(this).children("i.splashy-star_empty").length&&$(this).children("i.mbox_star").css("visibility","visible")}).on("mouseleave",".starSelect",function(){$(this).children("i.splashy-star_empty").length&&$(this).children("i.mbox_star").css("visibility","")});$(".table").on("click",".select_msgs",function(){var a=$(this).data("tableid");$("#"+a).find("input[name=msg_sel]").attr("checked",this.checked).closest("tr").addClass("rowChecked");if($(this).is(":checked"))$("#"+a).find("input[name=msg_sel]").closest("tr").addClass("rowChecked");else $("#"+a).find("input[name=msg_sel]").closest("tr").removeClass("rowChecked")});$("input[name=msg_sel]").on("click",function(){if($(this).is(":checked"))$(this).closest("tr").addClass("rowChecked");else $(this).closest("tr").removeClass("rowChecked")});$(".dt_actions").on("click",".delete_msg",function(c){c.preventDefault();var a=$(this).data("tableid"),b=$("#"+a).dataTable();if($("input[name=msg_sel]:checked","#"+a).length)$.colorbox({initialHeight:"0",initialWidth:"0",href:"#confirm_dialog",inline:true,opacity:"0.3",onComplete:function(){$(".confirm_yes").click(function(c){c.preventDefault();$("input[name=msg_sel]:checked",b.fnGetNodes()).closest("tr").fadeTo(300,0,function(){$(this).remove();b.fnDeleteRow(this);$(".select_msgs","#"+a).attr("checked",false)});$.colorbox.close()});$(".confirm_no").click(function(a){a.preventDefault();$.colorbox.close()})}});else $.sticky("Please select message(s) to delete.",{autoclose:5e3,position:"top-center",type:"st-info"})})},msg_rowLink:function(){$("*[data-msg_rowlink]").each(function(){var a=$(this).attr("data-msg_rowlink");(this.nodeName=="tr"?$(this):$(this).find("tr:has(td)")).each(function(){var b=$(this).find(a).first();if(!b.length)return;var c=b.attr("href");$(this).find("td").not(".nohref").click(function(){$(b).tab("show");$(".mbox .nav-tabs > .active").removeClass("active")});b.replaceWith(b.html())})})},new_message:function(){$("#mail_recipients").tagHandler({availableTags:["email1@example.com","email2@example.com","email3@example.com","email4@example.com","email5@example.com"],autocomplete:true});$(".auto_expand").autosize();$("#mail_attachments").pluploadQueue({runtimes:"html5,flash,silverlight",url:"lib/plupload/examples/upload.php",max_file_size:"10mb",chunk_size:"1mb",unique_names:true,filters:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Zip files",extensions:"zip"}],flash_swf_url:"lib/plupload/js/plupload.flash.swf",silverlight_xap_url:"lib/plupload/js/plupload.silverlight.xap"});$(".plupload_start").hide();$(".mail_uploader").hide();$(".add_files").click(function(a){a.preventDefault();$(".mail_uploader").show();$(this).remove()});$("#new_message_form").submit(function(){var a=$("#mail_attachments").pluploadQueue();if(a.files.length>0){a.bind("StateChanged",function(){a.files.length===a.total.uploaded+a.total.failed});a.start()}return false})}}