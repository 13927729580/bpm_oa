$(function(){$("*[data-fileupload]").each(function(){var d=$(this),c=$(this).find(":file"),e=c.attr("name");if(0!=c.length){var a=$(this).find(".fileupload-preview");"inline"!=a.css("display")&&"none"!=a.css("height")&&a.css("line-height",a.css("height"));var f=$(this).find('*[data-dismiss="fileupload"]'),b=$(this).find(':hidden[name="'+e+'"]');b.length||(b=$('<input type="hidden" />'),d.prepend(b));var g="image"==d.attr("data-fileupload")?"image":"file";c.attr("name","");c.change(function(f){b.val("");b.attr("name","");c.attr("name",e);f=f.target.files[0];if(g=="image"&&a.length&&(typeof f.type!=="undefined"?f.type.match("image.*"):f.name.match("\\.(gif|png|jpg)$"))&&typeof FileReader!=="undefined"){var h=new FileReader;h.onload=function(b){a.html('<img src="'+b.target.result+'" '+(a.css("max-height")!="none"?'style="max-height: '+a.css("max-height")+';"':"")+" />");d.addClass("fileupload-exists").removeClass("fileupload-new")};h.readAsDataURL(f)}else{a.html(escape(f.name));d.addClass("fileupload-exists").removeClass("fileupload-new")}});f.click(function(){b.val("");b.attr("name",e);c.attr("name","");a.html("");d.addClass("fileupload-new").removeClass("fileupload-exists");return false})}})});$(function(){$("*[data-rowlink]").each(function(){var a=$(this).attr("data-rowlink");("tr"==this.nodeName?$(this):$(this).find("tr:has(td)")).each(function(){var b=$(this).find(a).first();if(b.length){var c=b.attr("href");$(this).find("td").not(".nohref").click(function(){window.location=c});b.replaceWith(b.html())}})})})