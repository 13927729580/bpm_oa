$(function(){$("*[data-fileupload]").each(function(){var d=$(this),c=$(this).find(":file"),e=c.attr("name");if(c.length==0)return;var a=$(this).find(".fileupload-preview");a.css("display")!="inline"&&a.css("height")!="none"&&a.css("line-height",a.css("height"));var f=$(this).find('*[data-dismiss="fileupload"]'),b=$(this).find(':hidden[name="'+e+'"]');if(!b.length){b=$('<input type="hidden" />');d.prepend(b)}var g=d.attr("data-fileupload")=="image"?"image":"file";c.attr("name","");c.change(function(i){b.val("");b.attr("name","");c.attr("name",e);var f=i.target.files[0];if(g=="image"&&a.length&&(typeof f.type!=="undefined"?f.type.match("image.*"):f.name.match("\\.(gif|png|jpg)$"))&&typeof FileReader!=="undefined"){var h=new FileReader;h.onload=function(b){a.html('<img src="'+b.target.result+'" '+(a.css("max-height")!="none"?'style="max-height: '+a.css("max-height")+';"':"")+" />");d.addClass("fileupload-exists").removeClass("fileupload-new")};h.readAsDataURL(f)}else{a.html(escape(f.name));d.addClass("fileupload-exists").removeClass("fileupload-new")}});f.click(function(){b.val("");b.attr("name",e);c.attr("name","");a.html("");d.addClass("fileupload-new").removeClass("fileupload-exists");return false})})});$(function(){$("*[data-rowlink]").each(function(){var a=$(this).attr("data-rowlink");(this.nodeName=="tr"?$(this):$(this).find("tr:has(td)")).each(function(){var b=$(this).find(a).first();if(!b.length)return;var c=b.attr("href");$(this).find("td").not(".nohref").click(function(){window.location=c});b.replaceWith(b.html())})})})